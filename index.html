<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Platform Sederhana</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            text-align: center;
            padding: 20px;
        }
        
        h1 {
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .game-info {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        #gameCanvas {
            background: #1e1e2f;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            margin-bottom: 20px;
            width: 100%;
            max-width: 600px;
            height: 400px;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 600px;
            margin-top: 20px;
        }
        
        .joystick-container {
            width: 150px;
            height: 150px;
            position: relative;
        }
        
        .joystick-base {
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .joystick {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            position: absolute;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .action-button {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            user-select: none;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.1s;
        }
        
        .action-button:active {
            transform: scale(0.95);
            background: rgba(255, 255, 255, 0.4);
        }
        
        #jumpBtn {
            background: rgba(46, 204, 113, 0.7);
        }
        
        #runBtn {
            background: rgba(241, 196, 15, 0.7);
        }
        
        .instructions {
            margin-top: 20px;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            font-size: 14px;
        }
        
        .status {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 600px;
            margin-bottom: 10px;
        }
        
        .status-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Game Platform Sederhana</h1>
        <div class="game-info">
            <p>Gunakan kontrol di bawah untuk bermain!</p>
        </div>
        
        <div class="status">
            <div class="status-item" id="position">Posisi: (0, 0)</div>
            <div class="status-item" id="velocity">Kecepatan: (0, 0)</div>
            <div class="status-item" id="state">Status: Diam</div>
        </div>
        
        <canvas id="gameCanvas" width="600" height="400"></canvas>
        
        <div class="controls">
            <div class="joystick-container">
                <div class="joystick-base">
                    <div class="joystick" id="joystick"></div>
                </div>
            </div>
            
            <div class="action-buttons">
                <div class="action-button" id="jumpBtn">Lompat</div>
                <div class="action-button" id="runBtn">Lari</div>
            </div>
        </div>
        
        <div class="instructions">
            <p><strong>Cara Bermain:</strong> Gunakan joystick untuk bergerak, tombol "Lompat" untuk melompat, dan tombol "Lari" untuk berlari lebih cepat.</p>
        </div>
    </div>

    <script>
        // Inisialisasi canvas
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // Variabel game
        let player = {
            x: 100,
            y: 300,
            width: 40,
            height: 60,
            velocityX: 0,
            velocityY: 0,
            speed: 3,
            runSpeed: 6,
            jumpPower: 12,
            isJumping: false,
            isRunning: false,
            color: '#3498db'
        };
        
        // Platform
        const platforms = [
            {x: 0, y: 380, width: 600, height: 20, color: '#2ecc71'},
            {x: 200, y: 300, width: 100, height: 20, color: '#e74c3c'},
            {x: 400, y: 250, width: 100, height: 20, color: '#e74c3c'},
            {x: 100, y: 200, width: 100, height: 20, color: '#e74c3c'},
            {x: 300, y: 150, width: 100, height: 20, color: '#e74c3c'}
        ];
        
        // Gravitasi
        const gravity = 0.5;
        
        // Kontrol joystick
        const joystick = document.getElementById('joystick');
        const joystickBase = document.querySelector('.joystick-base');
        const joystickContainer = document.querySelector('.joystick-container');
        
        let joystickActive = false;
        let joystickX = 0;
        let joystickY = 0;
        const joystickRadius = 60;
        
        // Event listeners untuk joystick
        joystick.addEventListener('mousedown', startJoystick);
        joystick.addEventListener('touchstart', startJoystick);
        
        document.addEventListener('mousemove', moveJoystick);
        document.addEventListener('touchmove', moveJoystick);
        
        document.addEventListener('mouseup', stopJoystick);
        document.addEventListener('touchend', stopJoystick);
        
        // Tombol aksi
        const jumpBtn = document.getElementById('jumpBtn');
        const runBtn = document.getElementById('runBtn');
        
        jumpBtn.addEventListener('mousedown', jump);
        jumpBtn.addEventListener('touchstart', jump);
        
        runBtn.addEventListener('mousedown', () => { player.isRunning = true; });
        runBtn.addEventListener('touchstart', () => { player.isRunning = true; });
        
        runBtn.addEventListener('mouseup', () => { player.isRunning = false; });
        runBtn.addEventListener('touchend', () => { player.isRunning = false; });
        
        // Fungsi joystick
        function startJoystick(e) {
            e.preventDefault();
            joystickActive = true;
        }
        
        function moveJoystick(e) {
            if (!joystickActive) return;
            
            e.preventDefault();
            
            let clientX, clientY;
            
            if (e.type === 'mousemove') {
                clientX = e.clientX;
                clientY = e.clientY;
            } else {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
            }
            
            const rect = joystickContainer.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            let deltaX = clientX - centerX;
            let deltaY = clientY - centerY;
            
            const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
            
            if (distance > joystickRadius) {
                deltaX = (deltaX / distance) * joystickRadius;
                deltaY = (deltaY / distance) * joystickRadius;
            }
            
            joystickX = deltaX;
            joystickY = deltaY;
            
            // Update posisi joystick visual
            joystick.style.transform = `translate(${deltaX}px, ${deltaY}px)`;
            
            // Update kecepatan pemain berdasarkan input joystick
            const speed = player.isRunning ? player.runSpeed : player.speed;
            player.velocityX = (deltaX / joystickRadius) * speed;
        }
        
        function stopJoystick() {
            joystickActive = false;
            joystickX = 0;
            joystickY = 0;
            joystick.style.transform = 'translate(0, 0)';
            player.velocityX = 0;
        }
        
        // Fungsi lompat
        function jump() {
            if (!player.isJumping) {
                player.velocityY = -player.jumpPower;
                player.isJumping = true;
            }
        }
        
        // Update status
        function updateStatus() {
            document.getElementById('position').textContent = `Posisi: (${Math.round(player.x)}, ${Math.round(player.y)})`;
            document.getElementById('velocity').textContent = `Kecepatan: (${player.velocityX.toFixed(1)}, ${player.velocityY.toFixed(1)})`;
            
            let state = "Diam";
            if (player.isJumping) state = "Melompat";
            else if (player.velocityX !== 0) state = player.isRunning ? "Berlari" : "Berjalan";
            
            document.getElementById('state').textContent = `Status: ${state}`;
        }
        
        // Fungsi update game
        function update() {
            // Terapkan gravitasi
            player.velocityY += gravity;
            
            // Update posisi berdasarkan kecepatan
            player.x += player.velocityX;
            player.y += player.velocityY;
            
            // Batasi pemain di dalam canvas
            if (player.x < 0) player.x = 0;
            if (player.x + player.width > canvas.width) player.x = canvas.width - player.width;
            
            // Deteksi tabrakan dengan platform
            player.isJumping = true;
            
            for (let platform of platforms) {
                if (
                    player.x < platform.x + platform.width &&
                    player.x + player.width > platform.x &&
                    player.y + player.height > platform.y &&
                    player.y + player.height < platform.y + platform.height / 2 &&
                    player.velocityY > 0
                ) {
                    player.y = platform.y - player.height;
                    player.velocityY = 0;
                    player.isJumping = false;
                }
            }
            
            // Jika pemain jatuh di bawah canvas, reset posisi
            if (player.y > canvas.height) {
                player.x = 100;
                player.y = 300;
                player.velocityX = 0;
                player.velocityY = 0;
            }
            
            updateStatus();
        }
        
        // Fungsi render
        function render() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Gambar platform
            for (let platform of platforms) {
                ctx.fillStyle = platform.color;
                ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
                
                // Tambahkan detail pada platform
                ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
                ctx.fillRect(platform.x, platform.y, platform.width, 5);
            }
            
            // Gambar pemain
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.width, player.height);
            
            // Tambahkan detail pada pemain
            ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
            ctx.fillRect(player.x, player.y, player.width, 10);
            
            // Mata pemain
            ctx.fillStyle = 'white';
            ctx.fillRect(player.x + 10, player.y + 15, 8, 8);
            ctx.fillRect(player.x + 22, player.y + 15, 8, 8);
            
            // Mulut pemain
            ctx.fillStyle = 'white';
            ctx.fillRect(player.x + 10, player.y + 35, 20, 5);
        }
        
        // Game loop
        function gameLoop() {
            update();
            render();
            requestAnimationFrame(gameLoop);
        }
        
        // Mulai game
        gameLoop();
    </script>
</body>
</html>
